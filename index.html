<!DOCTYPE html>
<html>
	<head>
		<style>

			.container { }

			.board { position: relative; }
			.board .tile {
				width: 50px;
				height: 50px;
				position: absolute;
				background: #eee;
				transition: background 0.2s ease;
			}

			.board .tile:hover {
				background: #ddd;
			}

			.board .tile.selected {
				background: #bbb;
			}

		</style>
		<script src="js/jquery-1.9.0.min.js"></script>
		<script src="js/tal.js"></script>
		<script src="js/talCssRenderer.js"></script>
		<script>
			$(function() {
				// Game and renderer
				var talGame = new TalGame();
				var talRenderer = new TalCssRenderer($(".board"));

				// Settings
				talGame.playerCount(2);
				talGame.boardSize({width:10,height:10});

				// Error message, if any
				var error;

				// Players
				var humanPlayer = (function() {

					return {
						doMove : function(board, playerIndex, previousMove) {
							// Notify player that he can move
							$(".status").html(error || "Your turn, player " + playerIndex);
							error = null;
							// Wait for player input
							var deferred = new $.Deferred();
							talRenderer.on("playerInput", function(move) {
								deferred.resolve({
									from : {x:move.from.x, y:move.from.y},
									to : {x:move.to.x, y:move.to.y}
								});
							})
							return deferred.promise();
						}
					}
				})();
				talGame.player(1, humanPlayer);
				talGame.player(2, humanPlayer)

				// Ensure rendering after a player moved
				talGame.on("validPlayerMove", function() {
					var board = talGame.board();
					// Render board
					talRenderer.render(board);
				});

				talGame.on("invalidPlayerMove", function() {
					error = "That move was invalid. Try again please.";
				});

				// Start the game
				// Will automatically create a board of boardSize.width * boardSize.length and let the first player do its move
				talGame.start();

				// Render first situation
				talRenderer.render(talGame.board());
			});
		</script>
	</head>
	<body>
		<div class='container'>
			<div class='status'>

			</div>
			<div class='board'>
				
			</div>
		</div>
		<script>
			// Analytics
		</script>
	</body>
</html>